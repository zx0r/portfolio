<!doctype html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
    />
    <title>xClean - Эссенция Чистоты</title>
    <style>
      @import url("https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap");

      :root {
        --bg-light-start: #fdfdff; /* Even lighter, almost imperceptible start */
        --bg-light-end: #f0f2f8; /* Subtle cool end */
        --bg-dark-start: #161618; /* Deeper, more refined dark */
        --bg-dark-end: #212124;

        --glass-light-bg: rgba(
          250,
          250,
          252,
          0.65
        ); /* Higher transparency, more subtle */
        --glass-light-border: rgba(220, 220, 225, 0.4); /* Softer border */
        --glass-dark-bg: rgba(38, 38, 40, 0.7);
        --glass-dark-border: rgba(80, 80, 85, 0.5);

        --blur-intensity: 22px; /* Slightly increased for a more diffused look */

        --text-primary-light: #1a1a1c; /* Slightly softer black */
        --text-secondary-light: #5f5f64;
        --text-primary-dark: #fbfbfd;
        --text-secondary-dark: #a8a8ae;

        --accent-primary: #007aff; /* Apple Blue */
        --accent-secondary: #5856d6; /* Indigo */
        --accent-tertiary: #5ac8fa; /* Light Blue */

        /* A more nuanced gradient for text, less saturated, more elegant */
        --gradient-sophisticated-text: linear-gradient(
          110deg,
          var(--accent-primary) 15%,
          var(--accent-secondary) 50%,
          var(--accent-tertiary) 85%
        );

        --border-radius-standard: 16px; /* Consistent rounded corners */
        --border-radius-dock: 20px; /* Dock has slightly more pronounced rounding */

        --transition-easing: cubic-bezier(
          0.65,
          0.05,
          0.36,
          1
        ); /* Professional ease */
        --font-family-system: "Inter", -apple-system, BlinkMacSystemFont,
          "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      html {
        scroll-behavior: smooth;
      }

      body {
        font-family: var(--font-family-system);
        background: linear-gradient(
          140deg,
          var(--bg-light-start) 0%,
          var(--bg-light-end) 100%
        );
        color: var(--text-primary-light);
        overflow-x: hidden;
        line-height: 1.6;
        font-weight: 400;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        transition:
          background 0.5s var(--transition-easing),
          color 0.5s var(--transition-easing);
      }

      body.dark-mode-active {
        /* Applied when a dark slide is active */
        background: linear-gradient(
          140deg,
          var(--bg-dark-start) 0%,
          var(--bg-dark-end) 100%
        );
        color: var(--text-primary-dark);
      }

      .slide {
        min-height: 100vh;
        min-height: 100svh; /* Dynamic viewport height */
        display: flex;
        flex-direction: column; /* Allow for footer content if needed */
        align-items: center;
        justify-content: center;
        text-align: center;
        padding: 60px 25px;
        position: relative; /* Changed from absolute for better flow if fixed nav is outside */
        width: 100%;
        opacity: 0;
        /* More subtle entrance, focusing on content revealing */
        transform: translateY(15px) scale(0.99);
        transition:
          opacity 0.9s var(--transition-easing),
          transform 0.9s var(--transition-easing);
        will-change: opacity, transform; /* Performance hint */
        display: none; /* Hidden by default */
      }

      .slide.active {
        opacity: 1;
        transform: translateY(0) scale(1);
        display: flex; /* Show active slide */
      }

      .slide-content {
        max-width: 760px;
        width: 100%;
        z-index: 1;
      }

      .hero-statement {
        /* Renamed for impact */
        font-size: clamp(2rem, 4.5vw, 3rem); /* Refined sizing */
        font-weight: 700;
        letter-spacing: -0.03em; /* Tighter letter spacing */
        margin-bottom: 0.8rem;
        line-height: 1.25;
        color: inherit; /* Inherits from body or .slide.dark */
        animation: contentReveal 1.2s var(--transition-easing) 0.2s both;
      }

      .subtitle-text {
        /* Renamed */
        font-size: clamp(1rem, 2.2vw, 1.3rem);
        font-weight: 400;
        color: var(--text-secondary-light);
        margin-bottom: 2.5rem;
        letter-spacing: -0.015em;
        line-height: 1.5;
        animation: contentReveal 1.2s var(--transition-easing) 0.45s both;
      }
      body.dark-mode-active .subtitle-text {
        color: var(--text-secondary-dark);
      }

      .descriptive-text {
        /* Renamed */
        font-size: clamp(
          0.9rem,
          1.8vw,
          1.1rem
        ); /* Consistent small body text */
        font-weight: 400;
        line-height: 1.65;
        margin: 1rem 0;
        color: var(--text-secondary-light);
        opacity: 0;
        animation: contentReveal 1s var(--transition-easing) forwards;
        letter-spacing: -0.008em;
      }
      body.dark-mode-active .descriptive-text {
        color: var(--text-secondary-dark);
      }

      .descriptive-text.delay-1 {
        animation-delay: 0.7s;
      }
      .descriptive-text.delay-2 {
        animation-delay: 1s;
      }
      .descriptive-text.delay-3 {
        animation-delay: 1.3s;
      }

      @keyframes contentReveal {
        0% {
          opacity: 0;
          transform: translateY(12px);
        }
        100% {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .highlight {
        /* Replaces emphasis, more semantic */
        font-weight: 600;
        color: inherit; /* Will be primary text color */
      }

      .dynamic-gradient-text {
        /* Replaces gradient-text-dynamic */
        background: var(--gradient-sophisticated-text);
        background-size: 250% auto; /* Larger size for smoother animation */
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        font-weight: 600;
        animation: textShimmer 7s ease-in-out infinite;
      }

      @keyframes textShimmer {
        0% {
          background-position: 0% center;
        }
        50% {
          background-position: 100% center;
        }
        100% {
          background-position: 0% center;
        }
      }

      .glass-pane {
        /* Replaces glass-element */
        background: var(--glass-light-bg);
        backdrop-filter: blur(var(--blur-intensity));
        -webkit-backdrop-filter: blur(var(--blur-intensity));
        border: 1px solid var(--glass-light-border);
        border-radius: var(--border-radius-standard);
        padding: 2rem; /* Slightly reduced padding */
        margin: 2rem auto;
        max-width: 680px;
        box-shadow: 0 12px 35px rgba(0, 0, 0, 0.06);
        transition:
          background 0.4s var(--transition-easing),
          border-color 0.4s var(--transition-easing);
      }
      body.dark-mode-active .glass-pane {
        background: var(--glass-dark-bg);
        border-color: var(--glass-dark-border);
        box-shadow: 0 12px 40px rgba(0, 0, 0, 0.18);
      }

      .brand-mark-container {
        margin-bottom: 1.2rem;
      }

      .brand-mark {
        /* Replaces logo-text-main */
        font-size: clamp(3rem, 8vw, 5rem);
        font-weight: 200; /* Very light for an airy feel */
        background: var(--gradient-sophisticated-text);
        background-size: 250% auto;
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        animation:
          textShimmer 8s ease-in-out infinite,
          contentReveal 1.5s var(--transition-easing) 0.3s both;
        letter-spacing: -0.045em; /* Even tighter for the mark */
        line-height: 1;
      }

      /* Control Deck (macOS Dock Bar Styling) */
      .control-deck {
        margin-bottom: 20px;
        position: fixed;
        bottom: env(safe-area-inset-bottom, 18px); /* iOS safe area */
        left: 50%;
        transform: translateX(-50%);
        background: var(--glass-light-bg);
        backdrop-filter: blur(var(--blur-intensity));
        -webkit-backdrop-filter: blur(var(--blur-intensity));
        border: 1px solid var(--glass-light-border);
        border-radius: var(--border-radius-dock);
        padding: 7px;
        display: flex;
        gap: 7px;
        z-index: 1001; /* Above progress bar */
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
        transition:
          background 0.4s var(--transition-easing),
          border-color 0.4s var(--transition-easing),
          box-shadow 0.4s var(--transition-easing);
      }
      body.dark-mode-active .control-deck {
        background: var(--glass-dark-bg);
        border-color: var(--glass-dark-border);
        box-shadow: 0 10px 35px rgba(0, 0, 0, 0.22);
      }

      .deck-button {
        background-color: transparent;
        border: none;
        border-radius: 12px; /* Slightly less than dock for inset feel */
        padding: 0; /* Padding will be handled by width/height and flex alignment */
        color: var(--text-secondary-light);
        font-size: 17px; /* For SF Symbols or icon fonts */
        cursor: pointer;
        transition:
          background-color 0.2s var(--transition-easing),
          transform 0.15s var(--transition-easing);
        display: flex;
        align-items: center;
        justify-content: center;
        width: 36px; /* Square buttons */
        height: 36px;
        line-height: 1; /* Ensure icon is centered */
      }
      body.dark-mode-active .deck-button {
        color: var(--text-secondary-dark);
      }
      .deck-button .emoji-icon {
        font-size: 15px;
      }

      .deck-button:hover {
        background-color: rgba(0, 0, 0, 0.04);
        transform: scale(1.08); /* Slightly more pronounced hover */
      }
      body.dark-mode-active .deck-button:hover {
        background-color: rgba(255, 255, 255, 0.06);
      }

      .deck-button:active {
        transform: scale(0.96);
        background-color: rgba(0, 0, 0, 0.07);
      }
      body.dark-mode-active .deck-button:active {
        background-color: rgba(255, 255, 255, 0.1);
      }

      .deck-button:disabled {
        opacity: 0.35;
        cursor: not-allowed;
        background-color: transparent !important;
        transform: none !important;
      }

      .deck-button.deck-action-primary .emoji-icon {
        color: var(--accent-primary); /* Primary action color */
      }
      body.dark-mode-active .deck-button.deck-action-primary .emoji-icon {
        color: var(--accent-tertiary);
      }

      /* Progress Indicator */
      .progress-indicator-rail {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 2.5px; /* Even thinner */
        background-color: rgba(0, 0, 0, 0.03);
        z-index: 1000;
      }
      body.dark-mode-active .progress-indicator-rail {
        background-color: rgba(255, 255, 255, 0.05);
      }

      .progress-indicator-fill {
        height: 100%;
        background: var(--gradient-sophisticated-text);
        background-size: 300% auto;
        transition: width 0.9s var(--transition-easing); /* Matches slide transition */
        border-radius: 0 2.5px 2.5px 0;
        animation: textShimmer 6s linear infinite;
      }

      /* Status Display */
      .status-display {
        position: fixed;
        top: 18px;
        right: 18px;
        background: var(--glass-light-bg);
        backdrop-filter: blur(var(--blur-intensity));
        -webkit-backdrop-filter: blur(var(--blur-intensity));
        border: 1px solid var(--glass-light-border);
        border-radius: var(--border-radius-standard);
        padding: 5px 10px; /* Compact padding */
        font-size: 0.7rem;
        font-weight: 500;
        color: var(--text-secondary-light);
        z-index: 1000;
        box-shadow: 0 5px 20px rgba(0, 0, 0, 0.04);
        transition:
          background 0.4s var(--transition-easing),
          border-color 0.4s var(--transition-easing);
        display: flex;
        align-items: center;
      }
      body.dark-mode-active .status-display {
        background: var(--glass-dark-bg);
        border-color: var(--glass-dark-border);
        color: var(--text-secondary-dark);
      }
      .status-display .emoji-icon {
        font-size: 0.75rem;
        margin-right: 5px;
        opacity: 0; /* Hidden by default, shown when autoplaying */
        transition: opacity 0.3s var(--transition-easing);
      }
      .status-display .emoji-icon.visible {
        opacity: 1;
      }

      /* Responsive Design Adjustments */
      @media (max-width: 768px) {
        .slide {
          padding: 50px 20px;
        }
        .slide-content {
          max-width: 92%;
        }
        .hero-statement {
          font-size: clamp(1.7rem, 5.5vw, 2.6rem);
        }
        .subtitle-text {
          font-size: clamp(0.95rem, 2.8vw, 1.2rem);
        }
        .descriptive-text {
          font-size: clamp(0.85rem, 2.3vw, 1.05rem);
        }
        .control-deck {
          bottom: env(safe-area-inset-bottom, 15px);
          padding: 6px;
          gap: 6px;
        }
        .deck-button {
          width: 34px;
          height: 34px;
          font-size: 16px;
        }
        .deck-button .emoji-icon {
          font-size: 14px;
        }

        .status-display {
          top: 12px;
          right: 12px;
          padding: 4px 8px;
          font-size: 0.65rem;
        }
        .glass-pane {
          padding: 1.8rem;
          margin: 1.8rem auto;
        }
        .brand-mark {
          font-size: clamp(2.8rem, 10vw, 4.5rem);
        }
      }

      @media (max-width: 480px) {
        .hero-statement {
          font-size: clamp(1.5rem, 6.5vw, 2rem);
        }
        .subtitle-text {
          font-size: clamp(0.9rem, 3.8vw, 1.05rem);
          margin-bottom: 2rem;
        }
        .descriptive-text {
          font-size: clamp(0.8rem, 3.3vw, 0.95rem);
          margin: 0.8rem 0;
        }
        .control-deck {
          border-radius: 18px;
        }
      }
    </style>
  </head>
  <body>
    <div class="progress-indicator-rail">
      <div class="progress-indicator-fill" id="progressBar"></div>
    </div>

    <div class="status-display">
      <span class="emoji-icon" id="autoPlayIndicatorIcon">▶️</span>
      <span id="currentSlideDisplay">1</span> / <span id="totalSlidesDisplay"
        >10</span
      >
    </div>

    <div class="control-deck">
      <button
        class="deck-button"
        id="prevBtn"
        title="Предыдущий слайд"
        aria-label="Предыдущий слайд"
      >
        <span>←</span>
      </button>
      <button
        class="deck-button deck-action-primary"
        id="playBtn"
        title="Автовоспроизведение"
        aria-label="Автовоспроизведение"
      >
        <span class="emoji-icon">▶️</span>
      </button>
      <button
        class="deck-button"
        id="nextBtn"
        title="Следующий слайд"
        aria-label="Следующий слайд"
      >
        <span>→</span>
      </button>
    </div>

    <!-- SLIDES: Content refined for brevity and impact -->
    <div class="slide active">
      <div class="slide-content">
        <h1 class="hero-statement">Эссенция Чистоты</h1>
        <p class="subtitle-text">
          Представляем xClean: цифровое переосмысление ухода за вещами.
        </p>
        <p class="descriptive-text">
          Мы верим, что совершенство кроется в деталях. Технология должна быть
          невидимой, результат - безупречным.
        </p>
      </div>
    </div>

    <div class="slide">
      <div class="slide-content">
        <h2 class="hero-statement">За рамками привычного</h2>
        <p class="subtitle-text">
          Современные вызовы требуют инновационных решений.
        </p>
        <p class="descriptive-text delay-1">
          Стандартные подходы к уходу за одеждой часто означают компромисс между
          временем, качеством и удобством.
        </p>
        <p class="descriptive-text delay-2">
          xClean создан, чтобы этот компромисс
          <span class="highlight">исчез</span>.
        </p>
      </div>
    </div>

    <div class="slide">
      <div class="slide-content">
        <h2 class="hero-statement">
          Философия <span class="dynamic-gradient-text">xClean</span>
        </h2>
        <p class="subtitle-text">
          Где чистота - это не обязанность, а состояние.
        </p>
        <p class="descriptive-text delay-1">
          Мы стремимся создать не просто сервис, а
          <span class="highlight">ощущение</span>: спокойствия, уверенности и
          абсолютного доверия.
        </p>
        <p class="descriptive-text delay-2">
          Продукт уходит на второй план, оставляя лишь
          <span class="dynamic-gradient-text">безупречный результат</span>.
        </p>
      </div>
    </div>

    <div class="slide">
      <div class="slide-content">
        <div class="brand-mark-container">
          <div class="brand-mark">xClean</div>
        </div>
        <p class="subtitle-text">
          Имя, воплощающее
          <span class="highlight">простоту и совершенство</span>
        </p>
        <p class="descriptive-text delay-1">Лаконично. Запоминаемо. Глубоко.</p>
        <p class="descriptive-text delay-2">
          <span class="dynamic-gradient-text">xClean</span> - это знак качества
          в мире цифрового ухода.
        </p>
      </div>
    </div>

    <div class="slide dark-mode-active">
      <!-- Example of a dark slide -->
      <div class="slide-content">
        <h2 class="hero-statement">Порядок в каждом пикселе</h2>
        <p class="subtitle-text">Цифровая эстетика, вдохновленная чистотой.</p>
        <div class="glass-pane">
          <p class="descriptive-text" style="animation-delay: 0.3s">
            Интерфейс <span class="highlight">xClean</span> интуитивен и
            элегантен. Ничего лишнего.
          </p>
          <p class="descriptive-text" style="animation-delay: 0.6s">
            Каждое взаимодействие - это шаг к
            <span class="dynamic-gradient-text">идеальному порядку</span>,
            отраженному в цифровом пространстве.
          </p>
        </div>
      </div>
    </div>

    <div class="slide">
      <div class="slide-content">
        <h2 class="hero-statement">Культурный сдвиг</h2>
        <p class="subtitle-text">
          Чистота как осознанный выбор и эстетическое заявление.
        </p>
        <p class="descriptive-text delay-1">
          xClean - это <span class="highlight">новый стандарт</span>, где уход
          за гардеробом становится частью продуманного стиля жизни.
        </p>
        <p class="descriptive-text delay-2">
          Бренд, который не кричит, а
          <span class="dynamic-gradient-text">уверенно заявляет</span> о себе
          через качество и опыт.
        </p>
      </div>
    </div>

    <div class="slide dark-mode-active">
      <div class="slide-content">
        <h2 class="hero-statement">Интегрированный опыт</h2>
        <p class="subtitle-text">
          Технологии, которые работают для вас, а не наоборот.
        </p>
        <div class="glass-pane">
          <p class="descriptive-text" style="animation-delay: 0.3s">
            Приложение <span class="highlight">xClean</span> -ваш персональный
            консьерж чистоты.
          </p>
          <p class="descriptive-text" style="animation-delay: 0.6s">
            От заказа до доставки -<span class="dynamic-gradient-text"
              >полная прозрачность</span
            >
            и контроль на каждом этапе.
          </p>
        </div>
      </div>
    </div>

    <div class="slide">
      <div class="slide-content">
        <h2 class="hero-statement">
          Экосистема <span class="dynamic-gradient-text">доверия</span>
        </h2>
        <p class="subtitle-text">
          Создавая не просто услугу, а долгосрочные отношения.
        </p>
        <p class="descriptive-text delay-1">
          Каждая деталь сервиса, от упаковки до коммуникации, продумана для
          <span class="highlight">вашего спокойствия</span>.
        </p>
        <p class="descriptive-text delay-2">
          xClean живет в вашем телефоне, в рекомендациях, в ощущении
          <span class="dynamic-gradient-text">безупречности</span>.
        </p>
      </div>
    </div>

    <div class="slide dark-mode-active">
      <div class="slide-content">
        <h2 class="hero-statement">Трансформация восприятия</h2>
        <p class="subtitle-text">
          Это больше, чем прачечная. Это
          <span class="highlight">сдвиг парадигмы</span>.
        </p>
        <p class="descriptive-text delay-1">
          <span class="dynamic-gradient-text">xClean</span> переопределяет
          ожидания от бытового ухода.
        </p>
        <p class="descriptive-text delay-2">
          Мы устанавливаем планку, где
          <span class="highlight">совершенство - это норма</span>.
        </p>
      </div>
    </div>

    <div class="slide" id="finalSlide">
      <!-- Added ID for specific logic -->
      <div class="slide-content">
        <div class="brand-mark-container" style="margin-bottom: 1rem">
          <div class="brand-mark" style="font-size: clamp(2.8rem, 7vw, 4.5rem)">
            xClean
          </div>
        </div>
        <h2 class="hero-statement">
          Эра безупречной чистоты. <span class="highlight">Началась</span>.
        </h2>
        <p class="subtitle-text">Будущее уже здесь. И оно кристально чистое.</p>
        <p
          class="descriptive-text delay-1"
          style="margin-top: 2.5rem; font-size: 0.85rem"
        >
          Благодарим за то, что разделили с нами это видение.
        </p>
      </div>
    </div>

    <script>
      let currentSlideIndex = 0;
      let autoPlayTimeoutId = null; // Changed from interval to timeout for more control
      let isAutoPlaying = false;
      const REGULAR_SLIDE_DURATION = 6000; // Increased for better readability
      const FINAL_SLIDE_DURATION = 12000; // Significantly longer for the last slide

      const slides = document.querySelectorAll(".slide");
      const totalSlides = slides.length;
      const prevBtn = document.getElementById("prevBtn");
      const nextBtn = document.getElementById("nextBtn");
      const playBtn = document.getElementById("playBtn");
      const currentSlideDisplay = document.getElementById(
        "currentSlideDisplay",
      );
      const totalSlidesDisplay = document.getElementById("totalSlidesDisplay");
      const progressBar = document.getElementById("progressBar");
      const autoPlayIndicatorIcon = document.getElementById(
        "autoPlayIndicatorIcon",
      );
      const bodyEl = document.body;

      function applySlideStyles() {
        slides.forEach((s, i) => {
          s.classList.toggle("active", i === currentSlideIndex);
        });
        // Update body class for dark mode based on current slide
        const currentSlideIsDark =
          slides[currentSlideIndex].classList.contains("dark-mode-active");
        bodyEl.classList.toggle("dark-mode-active", currentSlideIsDark);

        currentSlideDisplay.textContent = currentSlideIndex + 1;
        progressBar.style.width = `${((currentSlideIndex + 1) / totalSlides) * 100}%`;
      }

      function updateNavControls() {
        prevBtn.disabled = currentSlideIndex === 0;
        nextBtn.disabled = currentSlideIndex === totalSlides - 1;
      }

      function updatePlayButtonState() {
        const playIcon = playBtn.querySelector(".emoji-icon");
        playIcon.textContent = isAutoPlaying ? "⏸️" : "▶️";
        autoPlayIndicatorIcon.classList.toggle("visible", isAutoPlaying);
      }

      function scheduleNextSlide(duration) {
        clearTimeout(autoPlayTimeoutId); // Clear any existing timeout
        if (!isAutoPlaying) return;

        autoPlayTimeoutId = setTimeout(() => {
          if (currentSlideIndex < totalSlides - 1) {
            currentSlideIndex++;
            applySlideStyles();
            updateNavControls();
            const nextDuration =
              currentSlideIndex === totalSlides - 1
                ? FINAL_SLIDE_DURATION
                : REGULAR_SLIDE_DURATION;
            scheduleNextSlide(nextDuration);
          } else {
            // Reached end of presentation during autoplay
            isAutoPlaying = false; // Stop autoplay
            updatePlayButtonState();
            updateNavControls(); // Next button should be disabled now
          }
        }, duration);
      }

      function navigateToSlide(index) {
        if (index < 0 || index >= totalSlides) return;
        currentSlideIndex = index;
        applySlideStyles();
        updateNavControls();
      }

      function startAutoplay(fromBeginning = false) {
        isAutoPlaying = true;
        if (fromBeginning) {
          currentSlideIndex = 0;
        }
        applySlideStyles(); // Apply styles for the current/first slide
        updateNavControls();
        updatePlayButtonState();
        const initialDuration =
          currentSlideIndex === totalSlides - 1 && !fromBeginning
            ? FINAL_SLIDE_DURATION
            : REGULAR_SLIDE_DURATION;
        scheduleNextSlide(initialDuration);
      }

      function stopAutoplay() {
        isAutoPlaying = false;
        clearTimeout(autoPlayTimeoutId);
        updatePlayButtonState();
        updateNavControls(); // Update nav controls as autoplay has stopped
      }

      function toggleAutoplay() {
        if (isAutoPlaying) {
          stopAutoplay();
        } else {
          // If on the last slide and play is pressed, restart from the beginning
          const restartCondition = currentSlideIndex === totalSlides - 1;
          startAutoplay(restartCondition);
        }
      }

      function handleManualNavigation(direction) {
        if (isAutoPlaying) stopAutoplay();
        const newIndex = currentSlideIndex + direction;
        navigateToSlide(newIndex);
      }

      // Event Listeners
      prevBtn.addEventListener("click", () => handleManualNavigation(-1));
      nextBtn.addEventListener("click", () => handleManualNavigation(1));
      playBtn.addEventListener("click", toggleAutoplay);

      document.addEventListener("keydown", (e) => {
        if (
          document.activeElement.tagName === "BUTTON" &&
          (e.key === " " || e.key === "Enter")
        )
          return;

        if (e.key === "ArrowLeft") {
          e.preventDefault();
          handleManualNavigation(-1);
        } else if (e.key === "ArrowRight" || e.key === " ") {
          e.preventDefault();
          if (currentSlideIndex === totalSlides - 1 && !isAutoPlaying) {
            // If on last slide and space/right is pressed, and not autoplaying
            // Do nothing or restart (current behavior: do nothing)
          } else {
            handleManualNavigation(1);
          }
        } else if (e.key === "Enter") {
          e.preventDefault();
          toggleAutoplay();
        }
      });

      // Initialization
      totalSlidesDisplay.textContent = totalSlides;
      applySlideStyles();
      updateNavControls();
      updatePlayButtonState();
    </script>
  </body>
</html>
